<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock List - Prototype | Hyla UAT Clone</title>

    <!-- Bootstrap 3.4.1 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <!-- Header / Navigation (Simplified) -->
    <nav class="navbar navbar-default navbar-static-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">HYLA UAT CLONE</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">STOCK LIST</a></li>
                    <li><a href="#">AUCTION</a></li>
                    <li><a href="#">PO</a></li>
                    <li><a href="#">GRADING SCALE</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#">HELP</a></li>
                    <li><a href="#">ACCOUNT <span class="caret"></span></a></li>
                    <li><a href="#">LOGOUT</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container main-content-area">

        <!-- Alerts (Mocked) -->
        <div class="alert alert-warning" role="alert">
            <span class="glyphicon glyphicon-bullhorn" aria-hidden="true"></span>
            1 Auctions open for bidding today. <a href="#" class="alert-link">SEE AUCTIONS</a>
        </div>

        <!-- Toolbar (Mocked) -->
        <div class="row" style="margin-bottom: 20px;">
            <div class="col-xs-12 text-right">
                <button class="btn btn-link"><span class="glyphicon glyphicon-import"></span> IMPORT</button>
                <button class="btn btn-link"><span class="glyphicon glyphicon-export"></span> EXPORT</button>
                <button class="btn btn-link"><span class="glyphicon glyphicon-shopping-cart"></span> CART <span
                        class="badge" style="background-color: #f0ad4e;">2</span></button>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Filters -->
            <div class="col-md-3 sidebar">
                <h3>Filters</h3>

                <!-- Search Box -->
                <div class="filter-group search-box-container">
                    <div class="form-group has-feedback">
                        <input type="text" class="form-control" id="search-input"
                            placeholder="Search Model (e.g. iPhone)...">
                        <span id="search-clear" class="glyphicon glyphicon-remove form-control-feedback text-muted"
                            style="cursor: pointer; pointer-events: auto; display: none;"></span>
                    </div>
                </div>

                <div class="filter-group">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="filter-oos"> Include Out of Stock
                            <span class="glyphicon glyphicon-info-sign text-info" title="Show 0 qty items"></span>
                        </label>
                    </div>
                </div>

                <div id="sidebar-filters-container">
                    <!-- Filters injected here by SidebarView -->
                </div>
            </div>

            <!-- Stock List Results -->
            <div class="col-md-9 main-content">
                <div class="row" style="margin-bottom: 10px;">
                    <div class="col-xs-6">
                        <span id="total-counts" class="text-muted">Loading...</span>
                    </div>
                    <!-- Pagination (Top) -->
                    <div class="col-xs-6 text-right">
                        <!-- Simplified -->
                    </div>
                </div>

                <!-- Active Filters Chips -->
                <div id="active-filters-container" style="margin-bottom: 15px;"></div>

                <div id="stock-list-container">
                    <!-- Product Cards injected here -->
                    <div class="text-center" style="padding: 50px;">
                        <img src="https://i.gifer.com/ZZ5H.gif" alt="Loading..." style="width: 50px;">
                    </div>
                </div>

                <!-- Pagination (Bottom) -->
                <nav aria-label="Page navigation" class="text-center">
                    <ul class="pagination" id="pagination-controls">
                        <!-- Pagination Links -->
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <!-- Experiment Controls -->
    <div id="experiment-panel">
        <h4>PROTOTYPE LAB</h4>
        <div class="checkbox">
            <label><input type="checkbox" id="toggle-density"> ðŸ§ª Compact Mode</label>
        </div>
        <div class="checkbox">
            <label><input type="checkbox" id="toggle-sticky"> ðŸ§ª Sticky Sidebar</label>
        </div>
    </div>


    <!-- Templates (Underscore.js) -->

    <!-- Filters Template -->
    <script type="text/template" id="filter-group-template">
        <div class="filter-group">
            <h4><%= title %></h4>
            <% _.each(items, function(item) { %>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" class="filter-checkbox" data-type="<%= type %>" value="<%= item.label %>"> 
                        <%= item.label %>
                        <span class="filter-count text-muted">(<%= item.count %>)</span>
                    </label>
                </div>
            <% }); %>
        </div>
    </script>

    <!-- Transaction Modal (Buy / Offer) -->
    <div class="modal fade" id="transaction-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal-item-title">Item Title</h4>
                    <small class="text-muted" id="modal-item-sku">Item #</small>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Available:</strong> <span id="modal-avail-qty">0</span></p>
                        </div>
                        <div class="col-md-6 text-right">
                            <p><strong>List Price:</strong> <span id="modal-list-price">$0.00</span></p>
                        </div>
                    </div>

                    <hr>

                    <form class="form-horizontal">
                        <div class="form-group">
                            <label for="modal-qty" class="col-sm-3 control-label">Quantity</label>
                            <div class="col-sm-4">
                                <input type="number" class="form-control" id="modal-qty" value="1" min="1">
                            </div>
                        </div>

                        <!-- Offer Price (Hidden in Buy Mode) -->
                        <div class="form-group" id="modal-offer-price-group" style="display:none;">
                            <label for="modal-offer-price" class="col-sm-3 control-label">Your Offer</label>
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <span class="input-group-addon">$</span>
                                    <input type="number" class="form-control" id="modal-offer-price" step="0.01">
                                </div>
                            </div>
                        </div>

                        <!-- Total (Only relevant for Buy, or calc for offer) -->
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Total</label>
                            <div class="col-sm-9">
                                <p class="form-control-static" id="modal-total"
                                    style="font-weight: bold; font-size: 1.2em;">$0.00</p>
                            </div>
                        </div>
                    </form>

                    <div id="offer-disclaimer" class="alert alert-warning"
                        style="display:none; margin-top: 10px; font-size: 0.9em;">
                        <strong>Note:</strong> Offers are cleared every day starting 11:00AM Central Time (CT).
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="pull-left">
                        <a href="#" id="modal-mode-toggle">Make an Offer</a>
                    </div>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="modal-submit-btn">ADD TO CART</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Card Template -->
    <script type="text/template" id="product-card-template">
                            <span class="material-icons">expand_more</span>
                        </a>
                    </div>
                </div>
            </div>
            <!-- Expanded Details View -->
            <div class="details-view" id="details-<%= id %>">
                <% _.each(items, function(item) { %>
                    <div class="sku-row">
                        <div class="sku-info">
                            <strong>SKU:</strong> <%= item.itemNumber %> | 
                            <strong>Warehouse:</strong> <%= item.attributes.warehouse %> |
                            <strong>Color:</strong> <%= item.attributes.color || 'N/A' %>
                        </div>
                        <div class="sku-actions">
                            <span class="price-tag" style="font-weight: bold; margin-right: 10px;">$<%= item.price %></span>
                            <button class="btn btn-default btn-sm">OFFER</button>
                            <button class="btn btn-primary btn-sm btn-buy" data-sku="<%= item.itemNumber %>">BUY</button>
                        </div>
                    </div>
                <% }); %>
            </div>
        </fieldset>
    </script>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.0/backbone-min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- App Logic -->
    <script src="js/mock-data.js"></script>
    <script src="js/app.js"></script>

</body>

</html>